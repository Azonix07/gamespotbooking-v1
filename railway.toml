[build]
builder = "NIXPACKS"
# Build frontend first, then install Python dependencies
buildCommand = "cd frontend && npm install && npm run build && cd ../backend && pip install -r requirements.txt"

[deploy]
# Start Flask backend (which now serves both API and React frontend)
startCommand = "cd backend && gunicorn app:app --bind 0.0.0.0:$PORT"
restartPolicyType = "ON_FAILURE"
restartPolicyMaxRetries = 10
